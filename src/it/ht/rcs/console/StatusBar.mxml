<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
         xmlns:s="library://ns.adobe.com/flex/spark"
         xmlns:mx="library://ns.adobe.com/flex/mx"
         xmlns:task="it.ht.rcs.console.task.*"
         xmlns:view="it.ht.rcs.console.task.view.*"
         width="100%">
  
  <fx:Script>
    <![CDATA[
      import it.ht.rcs.console.accounting.view.users.ClockProfile;
      import it.ht.rcs.console.accounting.view.users.UserProfile;
      import it.ht.rcs.console.task.controller.DownloadManager;
      import it.ht.rcs.console.task.view.DownloadManagerWindow;
      import it.ht.rcs.console.utils.Clock;
      
      import mx.managers.PopUpManager;
      
      private var downloadManagerWindow:DownloadManagerWindow = null;
      
      private function showUserProfile():void
      {
        PopUpManager.centerPopUp(PopUpManager.createPopUp(root, UserProfile, true));
      }
      
      private function showClockProfile():void
      {
        PopUpManager.centerPopUp(PopUpManager.createPopUp(root, ClockProfile, true));
      }
      
      private function showDownloadManager():void
      {
        if (downloadManagerWindow == null)
          downloadManagerWindow = PopUpManager.createPopUp(root, DownloadManagerWindow, false) as DownloadManagerWindow;
        PopUpManager.centerPopUp(downloadManagerWindow);
        downloadManagerWindow.visible = true;
      }
      
    ]]>
  </fx:Script>
  
  <s:layout>
    <s:HorizontalLayout/>
  </s:layout>
  
  <!-- user profile -->
  <mx:LinkButton left="10"
                 label="{Console.currentSession.user.name}\@{Console.currentSession.server}"
                 click="showUserProfile()"/>
  
  <!-- download manager -->
  <view:DownloadManagerBar visible="{DownloadManager.instance.active}" buttonMode="true"
                           click="showDownloadManager()"
                           includeInLayout="{DownloadManager.instance.active}" useHandCursor="true"/>
  
  <!-- UTC clock -->
  <s:HGroup width="100%" horizontalAlign="right" paddingRight="12">
    <mx:LinkButton label="{Clock.instance.currentConsoleTime}" click="showClockProfile()"/>
  </s:HGroup>
  
</s:Group>
