<?xml version="1.0" encoding="utf-8"?>
<s:Panel xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx"
         title="MONITOR" width="100%" height="100%" 
         xmlns:monitor="it.ht.rcs.console.monitor.*"
         addedToStage="added()"
         removedFromStage="removed()">
  <fx:Script>
    <![CDATA[
      import it.ht.rcs.console.StatusBar;
      import it.ht.rcs.console.model.LicenseManager;
      import it.ht.rcs.console.monitor.AlertingGroup;
      import mx.managers.PopUpManager;
      
      private function added():void
      {
        /* start the auto refresh when the section is open */
        StatusManager.instance.start();
        /* by default sort by status */
        StatusManager.instance.sort_by_status();
      }
      
      private function removed():void
      {
        /* stop the auto refresh when going away */
        StatusManager.instance.stop();
      }
      
      private function showAlertingGroup():void
      {
        PopUpManager.centerPopUp(PopUpManager.createPopUp(root, AlertingGroup, true));
      }
    ]]>
  </fx:Script>
  
  <fx:Metadata>
    [ResourceBundle("localized_main")] 
  </fx:Metadata>
  
  <!-- sidebar -->
  <mx:Accordion width="200" left="5" top="5" bottom="5" >
    <s:NavigatorContent label="{resourceManager.getString('localized_main', 'LICENSE')}" width="100%" height="100%">
      <monitor:LicenseView />
    </s:NavigatorContent>
    <s:NavigatorContent label="{resourceManager.getString('localized_main', 'LICENSE_VERSIONS')}" width="100%" height="100%">
      <monitor:VersionsView />
    </s:NavigatorContent>
  </mx:Accordion>
  
  <!-- button bar (transparent container) -->  
  <s:BorderContainer borderVisible="false" top="5" left="215" right="5" height="20" backgroundAlpha="0.0">
    <s:Button x="0" y="0" label="G" width="30" height="20" toolTip="{resourceManager.getString('localized_main', 'SELECT_ALERTING_GROUP')}" click="showAlertingGroup()" skinClass="it.ht.rcs.console.skins.ContactButton"/>
    <s:Button x="90" y="0" label="S" width="30" height="20" toolTip="{resourceManager.getString('localized_main', 'SORT_BY_STATUS')}" click="StatusManager.instance.sort_by_status()" skinClass="it.ht.rcs.console.skins.SortButton"/>
    <s:Button x="130" y="0" label="S" width="30" height="20" toolTip="{resourceManager.getString('localized_main', 'SORT_BY_NAME')}" click="StatusManager.instance.sort_by_name()" skinClass="it.ht.rcs.console.skins.SortNameButton"/>
  </s:BorderContainer>

  <!-- monitor list -->
  <s:List id="monitors" left="215" top="30" bottom="5" right="5" 
          itemRenderer="it.ht.rcs.console.monitor.StatusRenderer" 
          dataProvider="{StatusManager.instance.statuses}" 
          click="{monitors.selectedIndex = -1}"/>
  
</s:Panel>
