<?xml version="1.0" encoding="utf-8"?>
<main:Section xmlns:fx="http://ns.adobe.com/mxml/2009"
              xmlns:s="library://ns.adobe.com/flex/spark"
              xmlns:mx="library://ns.adobe.com/flex/mx"
              xmlns:main="it.ht.rcs.console.main.*"
              xmlns:groups="it.ht.rcs.console.accounting.view.groups.*"
              xmlns:users="it.ht.rcs.console.accounting.view.users.*"
              addedToStage="onAddedToStage()" removedFromStage="onRemovedFromStage()">
  
  <fx:Script>
    <![CDATA[
      import it.ht.rcs.console.accounting.controller.GroupManager;
      import it.ht.rcs.console.accounting.controller.OperationManager;
      import it.ht.rcs.console.accounting.controller.SessionManager;
      import it.ht.rcs.console.accounting.controller.UserManager;
      
      import locale.R;
      
      private function onAddedToStage():void
      {
        UserManager.instance.listenRefresh();
        UserManager.instance.refresh();
        GroupManager.instance.listenRefresh();
        GroupManager.instance.refresh();
        SessionManager.instance.listenRefresh();
        SessionManager.instance.refresh();
        OperationManager.instance.listenRefresh();
        OperationManager.instance.refresh();
      }
      
      private function onRemovedFromStage():void
      {
        UserManager.instance.unlistenRefresh(); 
        GroupManager.instance.unlistenRefresh();
        SessionManager.instance.unlistenRefresh();
        OperationManager.instance.unlistenRefresh();
      }
    ]]>
  </fx:Script>

  <mx:ViewStack id="subSections" width="100%" height="100%">
    
    <s:NavigatorContent width="100%" height="100%" label="{R.get('USERS')}">
      <users:Users/>
    </s:NavigatorContent>
    
    <s:NavigatorContent width="100%" height="100%" label="{R.get('GROUPS')}">
      <groups:Groups/>
    </s:NavigatorContent>
  
  </mx:ViewStack>

</main:Section>