<?xml version="1.0" encoding="utf-8"?>
<s:BorderContainer xmlns:fx="http://ns.adobe.com/mxml/2009"
									 xmlns:s="library://ns.adobe.com/flex/spark"
									 xmlns:mx="library://ns.adobe.com/flex/mx"
                   xmlns:viewers="it.ht.rcs.console.operations.view.evidences.advanced.viewers.*"
									 height="100%"
									 width="100%"
                   borderColor="0xCCCCCC"
                   backgroundColor="0xCCCCCC"
                   backgroundAlpha="0.5" creationComplete="init()" creationPolicy="all">
	<fx:Script>
		<![CDATA[
			import flashx.textLayout.conversion.TextConverter;
      
			private var _evidence:Object;
      [Bindable]
      private var _positions:Array;

			[Bindable]
			public function set evidence(value:Object):void
			{
        _evidence=value;
       if(value.type=="position")
       {
         var pos:Object={lat:value.data.latitude,lng:value.data.longitude, range:100} 
         _positions=[pos]   
         mapViewer.positions=_positions; 
       }
			}

			public function get evidence():Object
			{
				return _evidence;
			}

      
      public function set evidences(value:Vector.<Object>):void
      {
        _evidence=value[0];
        _positions=new Array();
        for(var i:int=0;i<value.length;i++)
        {
          if(value[i].type=="position")
          {
            var pos:Object={lat:value[i].data.latitude,lng:value[i].data.longitude, range:100};
            _positions.push(pos);
          }
        }
        mapViewer.positions=_positions; 
      }
      
			private function lineBreak(s:String):String
			{
				var result:String=s.replace(new RegExp("\n", "g"), "<br>");
				return result;
			}
      
      private function init():void
      {
       
      }
      
		]]>
	</fx:Script>
<s:layout>
  <s:VerticalLayout paddingBottom="10"
                      paddingLeft="10"
                      paddingRight="10"
                      paddingTop="10"
                      />
</s:layout>
  <s:RichText id="typeTxt" width="100%" textFlow="{TextConverter.importToFlow('&lt;b&gt;Program: &lt;/b&gt;'+evidence.data.type, TextConverter.TEXT_FIELD_HTML_FORMAT)}" fontSize="15"/>
  <s:Line width="100%">
    <s:stroke>
      <s:SolidColorStroke color="0xCCCCCC"/>
    </s:stroke>
  </s:Line>
  <s:RichText id="addressTxt" width="100%" textFlow="{TextConverter.importToFlow('&lt;b&gt;Path: &lt;/b&gt;'+evidence.data.address, TextConverter.TEXT_FIELD_HTML_FORMAT)}" fontSize="15"/>
  <s:Line width="100%">
    <s:stroke>
      <s:SolidColorStroke color="0xCCCCCC"/>
    </s:stroke>
  </s:Line>
  <s:HGroup>
    <s:RichText id="latTxt"  textFlow="{TextConverter.importToFlow('&lt;b&gt;Latitude: &lt;/b&gt;'+evidence.data.latitude, TextConverter.TEXT_FIELD_HTML_FORMAT)}" fontSize="15"/>
    <s:RichText id="longTxt"  textFlow="{TextConverter.importToFlow('&lt;b&gt;Longitude: &lt;/b&gt;'+evidence.data.longitude, TextConverter.TEXT_FIELD_HTML_FORMAT)}" fontSize="15"/>
  </s:HGroup>
  <viewers:MapViewer id="mapViewer" positions="{_positions}"/>
</s:BorderContainer>
