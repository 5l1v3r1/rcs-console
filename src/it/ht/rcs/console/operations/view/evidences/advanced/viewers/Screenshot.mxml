<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark" 
         xmlns:mx="library://ns.adobe.com/flex/mx" height="100%" width="100%">
  <fx:Script>
    <![CDATA[
      import flashx.textLayout.conversion.TextConverter;
      import it.ht.rcs.console.DB;
      import it.ht.rcs.console.evidence.controller.EvidenceManager;
      import it.ht.rcs.console.utils.ImageCache;
           
      private var _data:Object;
      private var _url:String;
      
      [Bindable]
      public function set data(value:Object):void
      {
        _data=value;
        var id:String=encodeURIComponent(data._grid);
        var target:String=encodeURIComponent(EvidenceManager.instance.evidenceFilter.target);
        _url=DB.hostAutocomplete(Console.currentSession.server) + "grid/"+ data._grid +"?target_id="+target;
        
        img.source=_url;
        img.smooth=false;
       // img.contentLoader=ImageCache.getInstance().cache;
        img.addEventListener(ProgressEvent.PROGRESS, onImageLoading)
        img.addEventListener(Event.COMPLETE, onImageLoaded)
        img.addEventListener(IOErrorEvent.IO_ERROR, onImageError);
        //img.contentLoader.load(_url)
       
      
      }
      
      public function get data():Object
      {
        return _data;
      }
      
      private function onImageLoading(e:ProgressEvent):void
      {
        
        
      }
      
      private function onImageError(e:IOErrorEvent):void
      {
        trace("image error");
      }
      
      private function onImageLoaded(e:Event):void
      {
        
        
      }
      
      
    ]]>
  </fx:Script>
  
    <s:BitmapImage id="img" width="100%" height="100%"/>
</s:VGroup>
