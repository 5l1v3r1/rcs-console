<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009"
                xmlns:s="library://ns.adobe.com/flex/spark"
                xmlns:mx="library://ns.adobe.com/flex/mx"
                autoDrawBackground="true" doubleClick="edit()" doubleClickEnabled="true">
  
  <fx:Script>
    <![CDATA[
      import it.ht.rcs.console.agent.model.Agent;
      import it.ht.rcs.console.operation.model.Operation;
      import it.ht.rcs.console.target.model.Target;
      
      [Embed(source="img/items/operation_black.png")]
      private static const operationIcon:Class;
      
      [Embed(source="img/items/target_black.png")]
      private static const targetIcon:Class;
      
      [Embed(source="img/items/agent_black.png")]
      private static const agentIcon:Class;
      
      private function edit():void
      {
//        var popup:EditCollectorForm = PopUpManager.createPopUp(this.parentDocument as DisplayObject, EditCollectorForm, true) as EditCollectorForm;
//        popup.collector = data as Collector;
//        PopUpManager.centerPopUp(popup);
      }
      
      override public function set data(value:Object):void
      {
        super.data = value;
        if (data is Operation)
          icon.source = operationIcon;
        else if (data is Target)
          icon.source = targetIcon;
        else if (data is Agent)
          icon.source = agentIcon;
        else if (data is Object && data.customType == 'evidences')
          icon.source = operationIcon;
        else if (data is Object && data.customType == 'filesystem')
          icon.source = targetIcon;
      }
      
    ]]>
  </fx:Script>
  
  <s:SkinnableContainer width="70">
    <s:Image id="icon" top="5" width="70" height="60"/>
    <s:Label id="bottomLabel" top="72" width="70" paddingBottom="5" text="{data.name}"
             textAlign="center"/>
  </s:SkinnableContainer>
  
</s:ItemRenderer>