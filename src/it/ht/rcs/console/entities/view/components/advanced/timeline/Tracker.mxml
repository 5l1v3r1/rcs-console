<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
          xmlns:s="library://ns.adobe.com/flex/spark" 
          xmlns:mx="library://ns.adobe.com/flex/mx" gap="4" creationComplete="init()" xmlns:timeline="it.ht.rcs.console.entities.view.components.advanced.timeline.*">
  <fx:Metadata>
    [Event(name="dateChange", type="flash.events.Event")]
  </fx:Metadata>
  <fx:Script>
    <![CDATA[
      
      private var monthNames:Array=["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
      
      [Bindable]
      public var currentDate:Date;
      
      private function doPlay():void
      {
        if(timeline.isPlaying)
        {
          timeline.doStop()
        }
        else
        {
          timeline.doPlay()
          
        }
      }
      private function onTimelineStop():void
      {
        playBtn.label="play"
      }
      
      private function onTimelinePlay():void
      {
        playBtn.label="stop"
      }
      
      private function doubleDigits(n:Number):String
      {
        if(n<10)
          return String("0"+n)
        else
          return String(n)
      }
      private function init():void
      {
        currentDate=timeline.currentDate;
        dispatchEvent(new Event("dateChange"));
      }
      private function onDateChange():void
      {
        currentDate=timeline.currentDate;
        dispatchEvent(new Event("dateChange"));
        currentDateTxt.text=doubleDigits(timeline.currentDate.date)+" "+monthNames[timeline.currentDate.month]+ " "+doubleDigits(timeline.currentDate.fullYear)+ " "+doubleDigits(timeline.currentDate.hours)+":"+doubleDigits(timeline.currentDate.minutes);
      }
    ]]>
  </fx:Script>
  <s:HGroup width="100%"
            clipAndEnableScrolling="true"
            height="136"
            id="viewport">
    <timeline:AdvancedTimeline width="100%" id="timeline" dateChange="onDateChange()" stop="onTimelineStop()" play="onTimelinePlay()"/>    
  </s:HGroup>
  <s:HScrollBar viewport="{viewport}"
                width="100%"
                id="scrollbar"
                stepSize="30"/>
  <s:HGroup verticalAlign="middle">
    <s:Button label="play" click="doPlay()" id="playBtn"/>
    <s:Spacer width="50"/>
    <s:Label id="currentDateTxt"/>
  </s:HGroup>
</s:VGroup>
