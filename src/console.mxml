<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
					   xmlns:s="library://ns.adobe.com/flex/spark" 
					   xmlns:mx="library://ns.adobe.com/flex/mx" 
             xmlns:console="it.ht.rcs.console.*"
             currentState="LoggedOut" 
             backgroundColor.LoggedOut="#6FA0BF"
             backgroundAlpha.LoggedOut="0.7"
             backgroundColor.LoggedIn="#CCCCCC"
             applicationComplete="init()" 
             title="RCS Console" 
             showStatusBar="false"
             skinClass="it.ht.rcs.console.skins.ApplicationSkin">
  <fx:Style source="it/ht/rcs/console/styles/style.css"/>
<fx:Script>
  <![CDATA[
    import it.ht.rcs.console.StatusBar;
    
    import mx.core.FlexGlobals;
    import mx.controls.Alert;
    
    /* This variable contains the version number, the value is take dynamically from console-app.xml */ 
    public static var appDescriptor:XML = NativeApplication.nativeApplication.applicationDescriptor;
    public static var ns:Namespace = appDescriptor.namespace();
    [Bindable]
    public static var appVersion:String = appDescriptor.ns::version;
    
    private function init():void
    {
      /* INIT STUFF */
    }
    
    
    public static function applicationExit():void {
      var exitingEvent:Event = new Event(Event.EXITING, false, true);
      NativeApplication.nativeApplication.dispatchEvent(exitingEvent);
      if (!exitingEvent.isDefaultPrevented()) {
        NativeApplication.nativeApplication.exit();
      }
    }

    
  ]]>
</fx:Script>
  <s:states>
		<s:State name="LoggedIn" enterState="{FlexGlobals.topLevelApplication.showStatusBar = true}" />
		<s:State name="LoggedOut" enterState="{FlexGlobals.topLevelApplication.showStatusBar = false}"/>
	</s:states>

  <!-- transition from state to state -->
  <!--
  <s:transitions>
    <s:Transition>
      <s:Parallel targets="{[LoginPanel, MainPanel]}">
        <s:Fade />
      </s:Parallel>
    </s:Transition> 
  </s:transitions>
  -->
  
  <!-- LoggedOut state -->
  <s:Panel id="LoginPanel" includeIn="LoggedOut" width="400" height="180" horizontalCenter="0" verticalCenter="-33" title="RCS Console 8.0" cornerRadius="0" >
    <console:Login />
  </s:Panel>
  
  <!-- LoggedIn state -->
  <s:Group id="MainPanel" includeIn="LoggedIn" width="100%" height="100%">
    <console:Main />
  </s:Group>
  
</s:WindowedApplication>
